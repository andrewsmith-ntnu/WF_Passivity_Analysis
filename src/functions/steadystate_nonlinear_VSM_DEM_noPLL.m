function y=steadystate_nonlinear_VSM_DEM_noPLL(x,conv)
% Steady-state nonlinear equations for a grid-forming VSM DEM converter without PLL

y= [1./conv.parameters.ls.*conv.pu.Omegab.*(-x(2).*conv.parameters.rs+conv.ss.vref0-conv.parameters.cf.*conv.parameters.rs.*conv.ss.Omegag0./(conv.parameters.rg+conv.parameters.rs-conv.parameters.cf.*(conv.parameters.ls.*conv.parameters.rg+conv.parameters.lg.*conv.parameters.rs).*conv.ss.Omegag0.^2).*(x(2).*conv.ss.Omegag0.*(-conv.parameters.lg.*conv.parameters.rs+conv.parameters.rg.*(conv.parameters.ls+conv.parameters.cf.*conv.parameters.rg.*conv.parameters.rs)+conv.parameters.cf.*conv.parameters.lg.^2.*conv.parameters.rs.*conv.ss.Omegag0.^2)+conv.parameters.rs.*(conv.parameters.cf.*conv.parameters.rg.* ...
  conv.ss.vnd0.*conv.ss.Omegag0+conv.ss.vnq0.*(-1+conv.parameters.cf.*conv.parameters.lg.*conv.ss.Omegag0.^2)).*cos(x(1))+conv.parameters.rs.*(conv.ss.vnd0+conv.parameters.cf.*conv.parameters.rg.*conv.ss.vnq0.*conv.ss.Omegag0-conv.parameters.cf.*conv.parameters.lg.*conv.ss.vnd0.*conv.ss.Omegag0.^2).*sin(x(1)))-conv.parameters.ls.*conv.ss.Omegag0./(conv.parameters.rg+conv.parameters.rs-conv.parameters.cf.*(conv.parameters.ls.*conv.parameters.rg+ ...
  conv.parameters.lg.*conv.parameters.rs).*conv.ss.Omegag0.^2).*(x(2).*conv.ss.Omegag0.*(conv.parameters.lg+conv.parameters.ls+conv.parameters.cf.*conv.parameters.rg.*conv.parameters.rs-conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.Omegag0.^2)+(conv.ss.vnq0+conv.parameters.cf.*conv.parameters.rs.*conv.ss.vnd0.*conv.ss.Omegag0-conv.parameters.cf.*conv.parameters.ls.*conv.ss.vnq0.*conv.ss.Omegag0.^2).*cos(x(1))+(-conv.ss.vnd0+conv.parameters.cf.*conv.parameters.rs.*conv.ss.vnq0.* ...
  conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.*conv.ss.vnd0.*conv.ss.Omegag0.^2).*sin(x(1)))+1./(conv.parameters.rg+conv.parameters.rs-conv.parameters.cf.*(conv.parameters.ls.*conv.parameters.rg+conv.parameters.lg.*conv.parameters.rs).*conv.ss.Omegag0.^2).*(x(2).*(-conv.parameters.rg.*(conv.parameters.rg+conv.parameters.rs)-conv.parameters.lg.*(conv.parameters.lg+conv.parameters.ls).*conv.ss.Omegag0.^2+conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.^2.*conv.ss.Omegag0.^2+conv.parameters.cf.* ...
  conv.parameters.lg.^2.*conv.parameters.ls.*conv.ss.Omegag0.^4)+(-(conv.parameters.rg+conv.parameters.rs).*conv.ss.vnd0-conv.parameters.lg.*conv.ss.vnq0.*conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.*conv.ss.vnd0.*conv.ss.Omegag0.^2+conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.vnq0.*conv.ss.Omegag0.^3).*cos(x(1))+(-(conv.parameters.rg+conv.parameters.rs).*conv.ss.vnq0+conv.parameters.lg.*conv.ss.vnd0.*conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.* ...
  conv.parameters.rg.*conv.ss.vnq0.*conv.ss.Omegag0.^2-conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.vnd0.*conv.ss.Omegag0.^3).*sin(x(1)))-conv.parameters.cf.*conv.parameters.ls.*conv.ss.Omegag0.^2./(conv.parameters.rg+conv.parameters.rs-conv.parameters.cf.*(conv.parameters.ls.*conv.parameters.rg+conv.parameters.lg.*conv.parameters.rs).*conv.ss.Omegag0.^2).*(x(2).*(-conv.parameters.rg.*(conv.parameters.rg+conv.parameters.rs)-conv.parameters.lg.*(conv.parameters.lg+conv.parameters.ls).*conv.ss.Omegag0.^2+ ...
  conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.^2.*conv.ss.Omegag0.^2+conv.parameters.cf.*conv.parameters.lg.^2.*conv.parameters.ls.*conv.ss.Omegag0.^4)+(-(conv.parameters.rg+conv.parameters.rs).*conv.ss.vnd0-conv.parameters.lg.*conv.ss.vnq0.*conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.*conv.ss.vnd0.*conv.ss.Omegag0.^2+conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.vnq0.*conv.ss.Omegag0.^3).*cos(x(1))+(-(conv.parameters.rg+conv.parameters.rs).* ...
  conv.ss.vnq0+conv.parameters.lg.*conv.ss.vnd0.*conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.*conv.ss.vnq0.*conv.ss.Omegag0.^2-conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.vnd0.*conv.ss.Omegag0.^3).*sin(x(1)))+conv.parameters.kdrpq.*(conv.ss.qref0+x(2)./(conv.parameters.rg+conv.parameters.rs-conv.parameters.cf.*(conv.parameters.ls.*conv.parameters.rg+conv.parameters.lg.*conv.parameters.rs).*conv.ss.Omegag0.^2).*(x(2).* ...
  conv.ss.Omegag0.*(-conv.parameters.lg.*conv.parameters.rs+conv.parameters.rg.*(conv.parameters.ls+conv.parameters.cf.*conv.parameters.rg.*conv.parameters.rs)+conv.parameters.cf.*conv.parameters.lg.^2.*conv.parameters.rs.*conv.ss.Omegag0.^2)+conv.parameters.rs.*(conv.parameters.cf.*conv.parameters.rg.*conv.ss.vnd0.*conv.ss.Omegag0+conv.ss.vnq0.*(-1+conv.parameters.cf.*conv.parameters.lg.*conv.ss.Omegag0.^2)).*cos(x(1))+conv.parameters.rs.*(conv.ss.vnd0+conv.parameters.cf.*conv.parameters.rg.*conv.ss.vnq0.*conv.ss.Omegag0-conv.parameters.cf.* ...
  conv.parameters.lg.*conv.ss.vnd0.*conv.ss.Omegag0.^2).*sin(x(1)))+(conv.parameters.rg+conv.parameters.rs-conv.parameters.cf.*(conv.parameters.ls.*conv.parameters.rg+conv.parameters.lg.*conv.parameters.rs).*conv.ss.Omegag0.^2).^(-2).*(x(2).*conv.ss.Omegag0.*(conv.parameters.lg+conv.parameters.ls+conv.parameters.cf.*conv.parameters.rg.*conv.parameters.rs-conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.Omegag0.^2)+(conv.ss.vnq0+conv.parameters.cf.*conv.parameters.rs.*conv.ss.vnd0.* ...
  conv.ss.Omegag0-conv.parameters.cf.*conv.parameters.ls.*conv.ss.vnq0.*conv.ss.Omegag0.^2).*cos(x(1))+(-conv.ss.vnd0+conv.parameters.cf.*conv.parameters.rs.*conv.ss.vnq0.*conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.*conv.ss.vnd0.*conv.ss.Omegag0.^2).*sin(x(1))).*(x(2).*(-conv.parameters.rg.*(conv.parameters.rg+conv.parameters.rs)-conv.parameters.lg.*(conv.parameters.lg+conv.parameters.ls).*conv.ss.Omegag0.^2+ ...
  conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.^2.*conv.ss.Omegag0.^2+conv.parameters.cf.*conv.parameters.lg.^2.*conv.parameters.ls.*conv.ss.Omegag0.^4)+(-(conv.parameters.rg+conv.parameters.rs).*conv.ss.vnd0-conv.parameters.lg.*conv.ss.vnq0.*conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.*conv.ss.vnd0.*conv.ss.Omegag0.^2+conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.vnq0.*conv.ss.Omegag0.^3).*cos(x(1))+(-(conv.parameters.rg+conv.parameters.rs).* ...
  conv.ss.vnq0+conv.parameters.lg.*conv.ss.vnd0.*conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.*conv.ss.vnq0.*conv.ss.Omegag0.^2-conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.vnd0.*conv.ss.Omegag0.^3).*sin(x(1))))),1./conv.parameters.ta.*(conv.ss.pref0-conv.parameters.kdrpOmega.*conv.ss.Omegag0+conv.parameters.kdrpOmega.*conv.ss.Omegaref0-(conv.parameters.rg+conv.parameters.rs-conv.parameters.cf.*(conv.parameters.ls.*conv.parameters.rg+ ...
  conv.parameters.lg.*conv.parameters.rs).*conv.ss.Omegag0.^2).^(-2).*(x(2).*conv.ss.Omegag0.*(-conv.parameters.lg.*conv.parameters.rs+conv.parameters.rg.*(conv.parameters.ls+conv.parameters.cf.*conv.parameters.rg.*conv.parameters.rs)+conv.parameters.cf.*conv.parameters.lg.^2.*conv.parameters.rs.*conv.ss.Omegag0.^2)+conv.parameters.rs.*(conv.parameters.cf.*conv.parameters.rg.*conv.ss.vnd0.*conv.ss.Omegag0+conv.ss.vnq0.*(-1+conv.parameters.cf.*conv.parameters.lg.*conv.ss.Omegag0.^2)).*cos(x(1))+ ...
  conv.parameters.rs.*(conv.ss.vnd0+conv.parameters.cf.*conv.parameters.rg.*conv.ss.vnq0.*conv.ss.Omegag0-conv.parameters.cf.*conv.parameters.lg.*conv.ss.vnd0.*conv.ss.Omegag0.^2).*sin(x(1))).*(x(2).*conv.ss.Omegag0.*(conv.parameters.lg+conv.parameters.ls+conv.parameters.cf.*conv.parameters.rg.*conv.parameters.rs-conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.Omegag0.^2)+(conv.ss.vnq0+conv.parameters.cf.*conv.parameters.rs.*conv.ss.vnd0.*conv.ss.Omegag0-conv.parameters.cf.*conv.parameters.ls.* ...
  conv.ss.vnq0.*conv.ss.Omegag0.^2).*cos(x(1))+(-conv.ss.vnd0+conv.parameters.cf.*conv.parameters.rs.*conv.ss.vnq0.*conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.*conv.ss.vnd0.*conv.ss.Omegag0.^2).*sin(x(1)))+x(2)./(conv.parameters.rg+conv.parameters.rs-conv.parameters.cf.*(conv.parameters.ls.*conv.parameters.rg+conv.parameters.lg.*conv.parameters.rs).*conv.ss.Omegag0.^2).*(x(2).*(-conv.parameters.rg.*(conv.parameters.rg+ ...
  conv.parameters.rs)-conv.parameters.lg.*(conv.parameters.lg+conv.parameters.ls).*conv.ss.Omegag0.^2+conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.^2.*conv.ss.Omegag0.^2+conv.parameters.cf.*conv.parameters.lg.^2.*conv.parameters.ls.*conv.ss.Omegag0.^4)+(-(conv.parameters.rg+conv.parameters.rs).*conv.ss.vnd0-conv.parameters.lg.*conv.ss.vnq0.*conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.*conv.ss.vnd0.*conv.ss.Omegag0.^2+conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.vnq0.*conv.ss.Omegag0.^3).*cos( ...
  x(1))+(-(conv.parameters.rg+conv.parameters.rs).*conv.ss.vnq0+conv.parameters.lg.*conv.ss.vnd0.*conv.ss.Omegag0+conv.parameters.cf.*conv.parameters.ls.*conv.parameters.rg.*conv.ss.vnq0.*conv.ss.Omegag0.^2-conv.parameters.cf.*conv.parameters.lg.*conv.parameters.ls.*conv.ss.vnd0.*conv.ss.Omegag0.^3).*sin(x(1))))];
end